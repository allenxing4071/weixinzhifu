# å¾®ä¿¡æ”¯ä»˜ç§¯åˆ†ç³»ç»Ÿ - Cursor AI é¡¹ç›®è§„åˆ™

## ğŸ¯ é¡¹ç›®æ¦‚è¿°
æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªåŸºäºå¾®ä¿¡æ”¯ä»˜çš„ç§¯åˆ†èµ é€ç³»ç»Ÿï¼ŒåŒ…å«ç®¡ç†åå°å’Œå¾®ä¿¡å°ç¨‹åºã€‚

## ğŸ“‹ å½“å‰çŠ¶æ€ï¼ˆ2025å¹´9æœˆ30æ—¥ï¼‰

### âœ… å·²å®Œæˆ
- **ç®¡ç†åå°**: å·²éƒ¨ç½²ä¸Šçº¿ https://www.guandongfang.cn/admin/
- **åç«¯API**: Node.js + Expressï¼ŒPM2ç®¡ç†ï¼Œç«¯å£3000
- **æ•°æ®åº“**: MySQL 8.0ï¼Œç”Ÿäº§ç¯å¢ƒè¿è¡Œä¸­
- **HTTPS**: é˜¿é‡Œäº‘SSLè¯ä¹¦å·²é…ç½®
- **å¾®ä¿¡å°ç¨‹åº**: ä»£ç å·²å®Œæˆï¼Œç­‰å¾…ICPå¤‡æ¡ˆ

### â° ç­‰å¾…ä¸­
- **ICPå¤‡æ¡ˆ**: guandongfang.cnæ­£åœ¨å®¡æ ¸ï¼ˆé˜»æ–­æ ¸éªŒçŠ¶æ€ï¼‰
- **å¾®ä¿¡å•†æˆ·å·**: å®¡æ ¸ä¸­ï¼ˆçº¦40åˆ†é’Ÿï¼‰

## ğŸ— æŠ€æœ¯æ¶æ„

### ç”Ÿäº§ç¯å¢ƒ
```
æœåŠ¡å™¨: é˜¿é‡Œäº‘ 8.156.84.226
åŸŸå: www.guandongfang.cn / guandongfang.cn
å‰ç«¯: /var/www/admin/ (React 18 + Ant Design)
åç«¯: /root/weixinzhifu/backend/payment-points-api-enhanced.js
æ•°æ®åº“: MySQL weixin_payment
Nginx: åå‘ä»£ç† + HTTPS + HTTP/2
è¿›ç¨‹ç®¡ç†: PM2
```

### å‰ç«¯æ¶æ„
- **è·¯å¾„**: admin-frontend/
- **æ„å»ºäº§ç‰©**: build/ (å·²éƒ¨ç½²)
- **æºä»£ç **: src/App.tsx (å•æ–‡ä»¶åº”ç”¨)
- **APIå®¢æˆ·ç«¯**: src/services/api.ts
- **æŠ€æœ¯æ ˆ**: React 18 + TypeScript + Ant Design

### åç«¯æ¶æ„
- **ç”Ÿäº§ç¯å¢ƒ**: payment-points-api-enhanced.js (JavaScript)
- **TypeScriptæºç **: src/ (æœªä½¿ç”¨ï¼Œæœ‰ç¼–è¯‘é”™è¯¯)
- **ç«¯å£**: 3000
- **æ•°æ®åº“é…ç½®**: .envæ–‡ä»¶

### å¾®ä¿¡å°ç¨‹åº
- **è·¯å¾„**: frontend/miniprogram/
- **APIåœ°å€**: https://www.guandongfang.cn/api/v1
- **é…ç½®æ–‡ä»¶**: app.js, utils/request.js, utils/request-full.js

## ğŸš¨ é‡è¦è§„åˆ™

### ç¦æ­¢è¡Œä¸º
1. âŒ **ä¸è¦ä¿®æ”¹ç”Ÿäº§ç¯å¢ƒåç«¯**: payment-points-api-enhanced.js
2. âŒ **ä¸è¦ä½¿ç”¨TypeScriptåç«¯**: backend/src/ æœ‰ç¼–è¯‘é”™è¯¯
3. âŒ **ä¸è¦é‡æ„å·²éƒ¨ç½²ä»£ç **: ä¿æŒç°æœ‰åŠŸèƒ½ç¨³å®š
4. âŒ **ä¸è¦ä¿®æ”¹Nginxé…ç½®**: nginx-guandongfang-fixed.conf å·²ä¼˜åŒ–

### å¿…é¡»éµå®ˆ
1. âœ… **å»¶ç»­ç°æœ‰åŠŸèƒ½**: åªåœ¨ç°æœ‰åŸºç¡€ä¸Šæ‰©å±•
2. âœ… **ä¿®æ”¹å‰å…ˆå¤‡ä»½**: git commit ä¿å­˜å½“å‰çŠ¶æ€
3. âœ… **æµ‹è¯•åå†éƒ¨ç½²**: æœ¬åœ°æµ‹è¯•é€šè¿‡åå†ä¸Šä¼ 
4. âœ… **æ›´æ–°æ–‡æ¡£**: æ‰€æœ‰å˜æ›´å¿…é¡»æ›´æ–°æ–‡æ¡£

## ğŸ“ æ–‡ä»¶è·¯å¾„å‚è€ƒ

### éƒ¨ç½²è„šæœ¬
- `scripts/deploy/deploy-admin-complete.sh` - ç®¡ç†åå°éƒ¨ç½²
- `scripts/deploy/deploy-backend-complete.sh` - åç«¯éƒ¨ç½²
- `scripts/deploy/deploy-ssl-cert.sh` - SSLè¯ä¹¦éƒ¨ç½²
- `scripts/utils/cleanup-project.sh` - é¡¹ç›®æ¸…ç†è„šæœ¬

### SSHè¿æ¥
- å¯†é’¥: `config/ssh/weixinpay.pem`
- å‘½ä»¤: `ssh -i config/ssh/weixinpay.pem root@8.156.84.226`

### æ•°æ®åº“è¡¨
- `users` - ç”¨æˆ·è¡¨
- `merchants` - å•†æˆ·è¡¨
- `payment_orders` - æ”¯ä»˜è®¢å•è¡¨
- `user_points` - ç”¨æˆ·ç§¯åˆ†è¡¨
- `point_records` - ç§¯åˆ†è®°å½•è¡¨
- `admin_users` - ç®¡ç†å‘˜è¡¨

## ğŸ”§ å¼€å‘è§„èŒƒ

### APIå¼€å‘
- è·¯ç”±å‰ç¼€: `/api/v1/`
- ç®¡ç†åå°API: `/api/v1/admin/`
- å°ç¨‹åºAPI: `/api/v1/auth/`, `/api/v1/payments/`, `/api/v1/points/`
- è¿”å›æ ¼å¼: `{ success: boolean, data: any, message?: string }`

### å‰ç«¯å¼€å‘
- ç›¸å¯¹è·¯å¾„API: `baseURL: '/api/v1'`
- é€šè¿‡Nginxä»£ç†åˆ°åç«¯
- åˆ†é¡µå‚æ•°: `page`, `pageSize`
- å“åº”æ ¼å¼: `{ success, data, pagination: { page, pageSize, total } }`

### æ•°æ®åº“æ“ä½œ
- ä½¿ç”¨è¿æ¥æ± : `mysql2/promise`
- é˜²æ­¢SQLæ³¨å…¥: ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢
- å­—æ®µåæ˜ å°„: æ³¨æ„æ•°æ®åº“å­—æ®µä¸APIå­—æ®µçš„è½¬æ¢

## ğŸ“š æ–‡æ¡£è·¯å¾„

### æ ¸å¿ƒæ–‡æ¡£
- `docs/00-é¡¹ç›®å®æ–½çŠ¶æ€æ€»ç»“.md` - é¡¹ç›®æœ€æ–°çŠ¶æ€
- `docs/00-å·²å®ŒæˆåŠŸèƒ½é”å®šæ–‡æ¡£.md` - å·²å®ŒæˆåŠŸèƒ½æ¸…å•
- `docs/README.md` - é¡¹ç›®è¯´æ˜

### è¯¦ç»†æ–‡æ¡£
- `docs/01-éœ€æ±‚æ–‡æ¡£/` - éœ€æ±‚è¯´æ˜
- `docs/02-æŠ€æœ¯è®¾è®¡/` - æŠ€æœ¯æ–¹æ¡ˆ
- `docs/09-éƒ¨ç½²è®°å½•/` - éƒ¨ç½²è®°å½•
- `docs/10-æ“ä½œæŒ‡å—/` - ä½¿ç”¨æŒ‡å—

## ğŸ” å®‰å…¨æ³¨æ„äº‹é¡¹

### æ•æ„Ÿä¿¡æ¯
- SSHå¯†é’¥: weixinpay.pem (ä¸è¦æäº¤åˆ°git)
- æ•°æ®åº“å¯†ç : ä¿å­˜åœ¨.envæ–‡ä»¶
- å¾®ä¿¡APIå¯†é’¥: é…ç½®åœ¨ç¯å¢ƒå˜é‡

### HTTPSè¦æ±‚
- å°ç¨‹åºå¿…é¡»ä½¿ç”¨HTTPS
- å·²é…ç½®SSLè¯ä¹¦
- Nginxå¼ºåˆ¶HTTPSé‡å®šå‘

## ğŸ“ å­¦ä¹ èµ„æº

### é—®é¢˜æ’æŸ¥
1. æŸ¥çœ‹æœåŠ¡æ—¥å¿—: `pm2 logs`
2. æŸ¥çœ‹Nginxæ—¥å¿—: `tail -f /var/log/nginx/error.log`
3. æ•°æ®åº“è¿æ¥: æ£€æŸ¥.envä¸­çš„DB_HOSTé…ç½®

### å¸¸è§é—®é¢˜
- **CORSé”™è¯¯**: æ£€æŸ¥å‰ç«¯API baseURLæ˜¯å¦ä¸ºç›¸å¯¹è·¯å¾„
- **404é”™è¯¯**: æ£€æŸ¥åç«¯è·¯ç”±æ˜¯å¦æ­£ç¡®å®ç°
- **å­—æ®µä¸å­˜åœ¨**: æ£€æŸ¥æ•°æ®åº“è¡¨ç»“æ„å’Œå­—æ®µå

## ğŸš€ ä¸‹ä¸€æ­¥è®¡åˆ’

1. â° ç­‰å¾…ICPå¤‡æ¡ˆé€šè¿‡
2. ğŸ”œ å¾®ä¿¡æ”¯ä»˜æ¥å£å¯¹æ¥
3. ğŸ”œ äºŒç»´ç ç”ŸæˆåŠŸèƒ½
4. ğŸ”œ å°ç¨‹åºçœŸæœºæµ‹è¯•

---

**æœ€åæ›´æ–°**: 2025å¹´9æœˆ30æ—¥
**ç»´æŠ¤äººå‘˜**: å¼€å‘å›¢é˜Ÿ
**è”ç³»æ–¹å¼**: å‚è€ƒé¡¹ç›®æ–‡æ¡£
