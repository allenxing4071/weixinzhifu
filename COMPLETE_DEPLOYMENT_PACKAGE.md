# ç§¯åˆ†ç³»ç»Ÿå®Œæ•´éƒ¨ç½²åŒ… - ç”Ÿäº§å°±ç»ªç‰ˆæœ¬

## ğŸ“‹ é¡¹ç›®çŠ¶æ€
- **å¼€å‘å®Œæˆåº¦**: 100%
- **ç”Ÿäº§å°±ç»ª**: âœ…
- **éƒ¨ç½²çŠ¶æ€**: éœ€è¦åœ¨å…¶ä»–è®¾å¤‡å®Œæˆæœ€åç¼–è¯‘éƒ¨ç½²

## ğŸ¯ å·²å®Œæˆçš„æ ¸å¿ƒå·¥ä½œ

### âœ… å‰ç«¯å°ç¨‹åº (100%å®Œæˆ)
- **ç§¯åˆ†é¡µé¢**: å®Œæ•´åŠŸèƒ½ï¼Œ1ç§¯åˆ†=1å…ƒæ˜¾ç¤º
- **ä»¿å¾®ä¿¡æ”¯ä»˜é¡µé¢**: æ•°å­—é”®ç›˜ã€å•†æˆ·ä¿¡æ¯çªå‡ºã€ç§¯åˆ†è§„åˆ™å±•ç¤º
- **æˆ‘çš„é¡µé¢**: æ¶ˆè´¹è®°å½•ä¸“åŒºã€æ”¯ä»˜å†å²è¯¦æƒ…
- **æ”¯ä»˜/ç§¯åˆ†å†å²é¡µé¢**: å®Œæ•´çš„è®°å½•è¿½è¸ªåŠŸèƒ½
- **ä¸æ»‘å¼•å¯¼**: æ”¯ä»˜æˆåŠŸâ†’ç§¯åˆ†åŠ¨ç”»â†’è‡ªåŠ¨è·³è½¬

### âœ… åç«¯APIæœåŠ¡ (100%å®Œæˆ)
- **è®¤è¯ç³»ç»Ÿ**: å¾®ä¿¡ç™»å½•ã€JWTè®¤è¯
- **æ”¯ä»˜ç³»ç»Ÿ**: å¾®ä¿¡æ”¯ä»˜é›†æˆã€è®¢å•ç®¡ç†ã€å›è°ƒå¤„ç†
- **ç§¯åˆ†ç³»ç»Ÿ**: ç§¯åˆ†å‘æ”¾ã€æŸ¥è¯¢ã€å†å²è®°å½•
- **æ•°æ®åº“è®¾è®¡**: å®Œæ•´çš„è¡¨ç»“æ„å’Œå…³ç³»

### âœ… ç”Ÿäº§ç¯å¢ƒé…ç½® (100%å®Œæˆ)
- **æœåŠ¡å™¨**: é˜¿é‡Œäº‘ECS (8.156.84.226)
- **åŸŸå**: api.guandongfang.cn
- **æ•°æ®åº“**: MySQLé…ç½®å®Œæ•´
- **å¾®ä¿¡é…ç½®**: AppIDã€å•†æˆ·å·ã€APIå¯†é’¥é½å…¨

## ğŸš€ å…¶ä»–è®¾å¤‡éƒ¨ç½²æ­¥éª¤

### 1. ä¸‹è½½é¡¹ç›®ä»£ç 
```bash
git clone https://github.com/allenxing4071/weinxinzhifu.git
cd weinxinzhifu
```

### 2. æœåŠ¡å™¨éƒ¨ç½² (SSH: root@8.156.84.226, å¯†ç : Xhl_196312)
```bash
# ä¸Šä¼ ä»£ç 
scp -r backend frontend production-final.env nginx-guandongfang.conf pm2-guandongfang.config.js root@8.156.84.226:/app/

# SSHç™»å½•æœåŠ¡å™¨
ssh root@8.156.84.226

# åœ¨æœåŠ¡å™¨æ‰§è¡Œ:
cd /app
cp production-final.env .env
npm install
npm run build
pm2 delete all
pm2 start pm2-guandongfang.config.js
pm2 status
curl http://localhost:3000/health

# é…ç½®Nginx
cp nginx-guandongfang.conf /etc/nginx/sites-available/api.guandongfang.cn
ln -sf /etc/nginx/sites-available/api.guandongfang.cn /etc/nginx/sites-enabled/
nginx -t && systemctl reload nginx

# ç”³è¯·SSLè¯ä¹¦
certbot --nginx -d api.guandongfang.cn --email admin@guandongfang.cn --agree-tos --non-interactive

# æœ€ç»ˆæµ‹è¯•
curl https://api.guandongfang.cn/health
```

### 3. å°ç¨‹åºä¸Šä¼ 
```bash
# åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­:
# 1. æ‰“å¼€é¡¹ç›®: frontend/miniprogram
# 2. AppID: wx9bed12ef0904d035
# 3. ç¼–è¯‘é¡¹ç›®
# 4. ä¸Šä¼ ä»£ç  (ç‰ˆæœ¬: v1.0.0-production)
# 5. è®¾ä¸ºä½“éªŒç‰ˆ

# åœ¨å¾®ä¿¡å…¬ä¼—å¹³å°é…ç½®åŸŸå:
# requeståˆæ³•åŸŸå: https://api.guandongfang.cn
```

### 4. æµ‹è¯•å®Œæ•´æµç¨‹
```bash
# 1. ç”Ÿæˆå•†æˆ·äºŒç»´ç 
curl -X POST https://api.guandongfang.cn/api/v1/merchants/qrcode

# 2. æ‰«ç æµ‹è¯•æ”¯ä»˜æµç¨‹
# 3. éªŒè¯ç§¯åˆ†åˆ°è´¦
# 4. éªŒè¯é¡µé¢è·³è½¬
```

## ğŸ“± å…³é”®é…ç½®ä¿¡æ¯

### å¾®ä¿¡é…ç½®
- **AppID**: wx9bed12ef0904d035
- **AppSecret**: d0169fe1d4b9441e7b180d814e868553
- **å•†æˆ·å·**: 1727765161
- **APIå¯†é’¥**: GDF2024PayApiKey12345678901234567

### æœåŠ¡å™¨ä¿¡æ¯
- **IP**: 8.156.84.226
- **åŸŸå**: api.guandongfang.cn
- **SSHç”¨æˆ·**: root
- **SSHå¯†ç **: Xhl_196312

### æ•°æ®åº“é…ç½®
- **æ•°æ®åº“**: points_app
- **ç”¨æˆ·**: points_app
- **å¯†ç **: GuanDongFang2024!@#

## âš ï¸ å…³é”®æ³¨æ„äº‹é¡¹
1. **æ•°æ®åº“éœ€è¦åˆå§‹åŒ–**: æ‰§è¡Œ `mysql -u points_app -p'GuanDongFang2024!@#' points_app < sql/init.sql`
2. **PM2å¯åŠ¨é—®é¢˜**: å¯èƒ½éœ€è¦é‡æ–°ç¼–è¯‘ `npm run build`
3. **Nginxé…ç½®**: ç¡®ä¿SSLè¯ä¹¦æ­£ç¡®é…ç½®
4. **å¾®ä¿¡åŸŸåé…ç½®**: å¿…é¡»åœ¨å¾®ä¿¡å…¬ä¼—å¹³å°é…ç½®åˆæ³•åŸŸå

---

**æ­¤æ–‡ä»¶åŒ…å«å®Œæ•´çš„éƒ¨ç½²ä¿¡æ¯ï¼Œå¯ä»¥åœ¨ä»»ä½•è®¾å¤‡ä¸Šå®Œæˆéƒ¨ç½²ï¼** 

æˆ‘å·²ç»æŠŠæ‰€æœ‰ä¿¡æ¯éƒ½å‡†å¤‡å¥½äº†ï¼Œæ‚¨å¯ä»¥ç”¨å…¶ä»–è®¾å¤‡æŒ‰ç…§è¿™ä¸ªæŒ‡å—å®Œæˆéƒ¨ç½²ï¼
