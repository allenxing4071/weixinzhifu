<!-- 高端个人中心页面 - 统一设计风格 -->
<view class="profile-premium-container">
  <!-- 高端用户信息头部 -->
  <view class="premium-profile-header">
    <view class="header-gradient"></view>
    <view class="profile-content">
      <view wx:if="{{userInfo}}" class="user-info-section">
        <view class="avatar-wrapper">
          <image class="user-avatar" src="{{userInfo.avatar || '/images/default-avatar.png'}}"></image>
          <view class="avatar-status"></view>
        </view>
        <view class="user-details">
          <view class="user-name">{{userInfo.nickname}}</view>
          <view class="user-level">{{userInfo.levelName || '普通会员'}}</view>
          <view class="user-subtitle">您的个人账户</view>
        </view>
        <view class="edit-action" bind:tap="editProfile">
          <view class="edit-icon">⚙️</view>
        </view>
      </view>
      
      <!-- 未登录状态 -->
      <view wx:else class="login-section">
        <view class="login-icon">👤</view>
        <view class="login-title">欢迎使用</view>
        <view class="login-subtitle">请登录以获得完整体验</view>
        <button class="premium-login-btn" bind:tap="handleLogin">微信登录</button>
      </view>
      
      <!-- 高端统计网格 -->
      <view wx:if="{{userInfo}}" class="premium-stats-grid">
        <view class="premium-stat-card" bind:tap="goToPoints">
          <view class="stat-icon">💎</view>
          <view class="stat-number">{{pointsInfo.balance || 0}}</view>
          <view class="stat-label">可用积分</view>
        </view>
        <view class="premium-stat-card">
          <view class="stat-icon">📊</view>
          <view class="stat-number">{{paymentInfo.totalOrders || 0}}</view>
          <view class="stat-label">订单总数</view>
        </view>
        <view class="premium-stat-card">
          <view class="stat-icon">💰</view>
          <view class="stat-number">¥{{paymentInfo.totalAmount || '0.00'}}</view>
          <view class="stat-label">累计消费</view>
        </view>
      </view>
    </view>
  </view>

  <!-- 高端内容区域 -->
  <view wx:if="{{userInfo}}" class="premium-content">
    <!-- 账户概览面板 -->
    <view class="premium-panel">
      <view class="section-header">
        <view class="section-title">账户概览</view>
        <view class="section-subtitle">您的积分和消费统计</view>
      </view>
      
      <view class="summary-cards">
        <view class="summary-card balance-card" bind:tap="goToPoints">
          <view class="card-icon">💎</view>
          <view class="card-content">
            <view class="card-number">{{pointsInfo.balance || 0}}</view>
            <view class="card-label">积分余额</view>
            <view class="card-desc">立即使用</view>
          </view>
        </view>
        
        <view class="summary-card earned-card">
          <view class="card-icon">🎯</view>
          <view class="card-content">
            <view class="card-number">{{pointsInfo.totalEarned || 0}}</view>
            <view class="card-label">累计获得</view>
            <view class="card-desc">总积分收入</view>
          </view>
        </view>
      </view>
    </view>

    <!-- 快速功能面板 -->
    <view class="premium-panel">
      <view class="section-header">
        <view class="section-title">快速功能</view>
        <view class="section-subtitle">常用操作和服务</view>
      </view>
      
      <view class="feature-grid">
        <view class="feature-card" bind:tap="goToPoints">
          <view class="feature-icon">📈</view>
          <view class="feature-content">
            <view class="feature-title">积分明细</view>
            <view class="feature-desc">查看积分记录</view>
          </view>
        </view>
        
        <view class="feature-card" bind:tap="goToMall">
          <view class="feature-icon">🏪</view>
          <view class="feature-content">
            <view class="feature-title">积分商城</view>
            <view class="feature-desc">即将上线</view>
          </view>
          <view class="feature-badge">新</view>
        </view>
        
        <view class="feature-card" bind:tap="contactService">
          <view class="feature-icon">📞</view>
          <view class="feature-content">
            <view class="feature-title">在线客服</view>
            <view class="feature-desc">获得帮助</view>
          </view>
        </view>
        
        <view class="feature-card" bind:tap="showAbout">
          <view class="feature-icon">ℹ️</view>
          <view class="feature-content">
            <view class="feature-title">关于我们</view>
            <view class="feature-desc">了解更多</view>
          </view>
        </view>
      </view>
    </view>
    
    <!-- 消费记录面板 -->
    <view class="premium-panel">
      <view class="section-header">
        <view class="section-title">消费记录</view>
        <view class="section-subtitle">查看您的消费和积分明细</view>
      </view>
      
      <view class="analytics-cards">
        <view class="analytics-card" bind:tap="togglePaymentHistory">
          <view class="analytics-title">订单总数</view>
          <view class="analytics-value">{{paymentInfo.totalOrders || 0}}</view>
          <view class="analytics-label">支付笔数</view>
        </view>
        
        <view class="analytics-card" bind:tap="togglePaymentHistory">
          <view class="analytics-title">消费金额</view>
          <view class="analytics-value">¥{{paymentInfo.totalAmount || '0.00'}}</view>
          <view class="analytics-label">累计消费</view>
        </view>
      </view>
      
      <view class="quick-actions">
        <view class="action-title">记录操作</view>
        <view class="action-buttons">
          <view class="action-btn" bind:tap="togglePaymentHistory">
            <view class="btn-icon">📄</view>
            <view class="btn-text">{{showPaymentHistory ? '收起记录' : '查看记录'}}</view>
          </view>
          <view class="action-btn" bind:tap="goToFullHistory">
            <view class="btn-icon">📊</view>
            <view class="btn-text">全部记录</view>
          </view>
        </view>
      </view>
      
      <!-- 支付记录列表 -->
      <view wx:if="{{showPaymentHistory}}" class="premium-record-list">
        <view class="record-header">
          <view class="header-title">支付明细</view>
          <view class="header-subtitle">显示最近10条记录</view>
        </view>
        
        <!-- 加载状态 -->
        <view wx:if="{{loadingHistory}}" class="history-loading">
          <view class="loading-icon">⏳</view>
          <view class="loading-text">加载中...</view>
        </view>
        
        <!-- 空状态 -->
        <view wx:elif="{{paymentHistory.length === 0}}" class="history-empty">
          <view class="empty-icon">📄</view>
          <view class="empty-text">暂无支付记录</view>
          <view class="empty-desc">使用微信扫一扫支付后即可查看</view>
        </view>
        
        <!-- 记录列表 -->
        <view wx:else class="history-records">
          <view 
            wx:for="{{paymentHistory}}" 
            wx:key="id"
            class="premium-record"
            bind:tap="viewPaymentDetail"
            data-order="{{item}}"
          >
            <view class="record-icon-wrapper">
              <view class="record-type-icon">💳</view>
            </view>
            <view class="record-content">
              <view class="record-title">{{item.merchantName || '商户支付'}}</view>
              <view class="record-desc">{{item.description || '微信支付'}}</view>
              <view class="record-timestamp">{{item.formattedTime}}</view>
            </view>
            <view class="record-value">
              <view class="points-amount positive">+{{item.pointsAwarded || item.amount}}</view>
              <view class="points-label">积分</view>
            </view>
          </view>
        </view>
        
        <!-- 查看更多 -->
        <view wx:if="{{paymentHistory.length >= 10}}" class="view-more">
          <button class="more-btn" bind:tap="goToFullHistory">查看全部记录</button>
        </view>
      </view>
    </view>
  </view>

  <!-- 版本信息 -->
  <view class="version-info">
    <view class="version-text">积分助手 v{{version}}</view>
  </view>
</view>