# 04-æ¥å£éœ€æ±‚æ–‡æ¡£

## ğŸ“– æ–‡æ¡£ä¿¡æ¯
- **æ–‡æ¡£ç‰ˆæœ¬**ï¼šV1.0
- **åˆ›å»ºæ—¥æœŸ**ï¼š2025å¹´9æœˆ
- **ç³»ç»Ÿæ¶æ„å¸ˆ**ï¼š[å§“å]
- **åç«¯è´Ÿè´£äºº**ï¼š[å§“å]
- **è¯„å®¡çŠ¶æ€**ï¼šå¾…è¯„å®¡

---

## ğŸ¯ æ–‡æ¡£æ¦‚è¿°

æœ¬æ–‡æ¡£å®šä¹‰ç§¯åˆ†èµ é€å°ç¨‹åºæ‰€éœ€çš„æ‰€æœ‰APIæ¥å£ï¼ŒåŒ…æ‹¬æ¥å£è§„èŒƒã€æ•°æ®æ ¼å¼ã€é”™è¯¯å¤„ç†ã€å®‰å…¨è®¤è¯ç­‰æŠ€æœ¯è¦æ±‚ã€‚

### è®¾è®¡åŸåˆ™
1. **RESTfulè®¾è®¡**ï¼šéµå¾ªRESTæ¶æ„é£æ ¼
2. **ç»Ÿä¸€è§„èŒƒ**ï¼šæ‰€æœ‰æ¥å£éµå¾ªç»Ÿä¸€çš„è®¾è®¡è§„èŒƒ
3. **å®‰å…¨ç¬¬ä¸€**ï¼šæ‰€æœ‰æ¥å£éƒ½æœ‰å®‰å…¨è®¤è¯å’Œæˆæƒ
4. **ç‰ˆæœ¬æ§åˆ¶**ï¼šæ”¯æŒAPIç‰ˆæœ¬ç®¡ç†å’Œå‘åå…¼å®¹
5. **æ–‡æ¡£é©±åŠ¨**ï¼šæ¥å£ä¼˜å…ˆè®¾è®¡ï¼Œæ–‡æ¡£ä¸ä»£ç åŒæ­¥

---

## ğŸŒ æ¥å£æ€»è§ˆ

### æ¥å£åˆ†ç±»
```
APIæ¥å£åˆ†ç±»ï¼š
â”œâ”€â”€ ç”¨æˆ·ç®¡ç†æ¥å£ï¼ˆ/api/v1/usersï¼‰
â”‚   â”œâ”€â”€ ç”¨æˆ·æ³¨å†Œç™»å½•
â”‚   â”œâ”€â”€ ç”¨æˆ·ä¿¡æ¯ç®¡ç†
â”‚   â””â”€â”€ ç”¨æˆ·çŠ¶æ€æ§åˆ¶
â”œâ”€â”€ æ”¯ä»˜ç®¡ç†æ¥å£ï¼ˆ/api/v1/paymentsï¼‰
â”‚   â”œâ”€â”€ æ”¯ä»˜è®¢å•ç®¡ç†
â”‚   â”œâ”€â”€ æ”¯ä»˜çŠ¶æ€æŸ¥è¯¢
â”‚   â””â”€â”€ æ”¯ä»˜å›è°ƒå¤„ç†
â”œâ”€â”€ ç§¯åˆ†ç®¡ç†æ¥å£ï¼ˆ/api/v1/pointsï¼‰
â”‚   â”œâ”€â”€ ç§¯åˆ†å‘æ”¾ç®¡ç†
â”‚   â”œâ”€â”€ ç§¯åˆ†æŸ¥è¯¢ç»Ÿè®¡
â”‚   â””â”€â”€ ç§¯åˆ†è§„åˆ™é…ç½®
â”œâ”€â”€ å•†æˆ·ç®¡ç†æ¥å£ï¼ˆ/api/v1/merchantsï¼‰
â”‚   â”œâ”€â”€ å•†æˆ·ä¿¡æ¯ç®¡ç†
â”‚   â”œâ”€â”€ æ”¶æ¬¾ç ç®¡ç†
â”‚   â””â”€â”€ äº¤æ˜“æ•°æ®æŸ¥è¯¢
â””â”€â”€ ç³»ç»Ÿç®¡ç†æ¥å£ï¼ˆ/api/v1/systemï¼‰
    â”œâ”€â”€ é…ç½®å‚æ•°ç®¡ç†
    â”œâ”€â”€ ç›‘æ§æ•°æ®æ¥å£
    â””â”€â”€ æ—¥å¿—æŸ¥è¯¢æ¥å£
```

### æ¥å£ç‰ˆæœ¬ç­–ç•¥
```typescript
// ç‰ˆæœ¬æ§åˆ¶ç­–ç•¥
const APIVersioning = {
  currentVersion: 'v1',
  versionHeader: 'API-Version',
  supportedVersions: ['v1'],
  deprecationPolicy: {
    noticeTime: '6ä¸ªæœˆ',
    supportTime: '12ä¸ªæœˆ',
    migrationGuide: 'æä¾›è¿ç§»æŒ‡å—'
  }
}
```

---

## ğŸ” è®¤è¯å’Œæˆæƒ

### è®¤è¯æœºåˆ¶

#### JWT Tokenè®¤è¯
```typescript
// JWT Tokenç»“æ„
interface JWTPayload {
  sub: string              // ç”¨æˆ·ID
  iat: number             // ç­¾å‘æ—¶é—´
  exp: number             // è¿‡æœŸæ—¶é—´
  aud: string             // æ¥æ”¶æ–¹
  iss: string             // ç­¾å‘æ–¹
  roles: string[]         // ç”¨æˆ·è§’è‰²
  permissions: string[]   // æƒé™åˆ—è¡¨
}

// Tokenä½¿ç”¨æ–¹å¼
const authHeader = {
  'Authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...'
}
```

#### APIç­¾åéªŒè¯
```typescript
// è¯·æ±‚ç­¾åå‚æ•°
interface RequestSignature {
  timestamp: number       // è¯·æ±‚æ—¶é—´æˆ³
  nonce: string          // éšæœºå­—ç¬¦ä¸²
  signature: string      // ç­¾åå€¼
}

// ç­¾åç®—æ³•
const generateSignature = (method: string, url: string, body: string, timestamp: number, nonce: string, secretKey: string) => {
  const message = `${method}\n${url}\n${body}\n${timestamp}\n${nonce}`
  return HMAC_SHA256(message, secretKey)
}
```

### æƒé™æ§åˆ¶
```typescript
// è§’è‰²æƒé™å®šä¹‰
enum UserRole {
  CUSTOMER = 'customer',      // æ™®é€šç”¨æˆ·
  MERCHANT = 'merchant',      // å•†æˆ·
  ADMIN = 'admin',           // ç®¡ç†å‘˜
  SUPER_ADMIN = 'super_admin' // è¶…çº§ç®¡ç†å‘˜
}

// æƒé™æ£€æŸ¥ä¸­é—´ä»¶
const requirePermission = (permission: string) => {
  return (req: Request, res: Response, next: NextFunction) => {
    if (!req.user.permissions.includes(permission)) {
      return res.status(403).json({
        success: false,
        code: 'PERMISSION_DENIED',
        message: 'æƒé™ä¸è¶³'
      })
    }
    next()
  }
}
```

---

## ğŸ‘¤ ç”¨æˆ·ç®¡ç†æ¥å£

### POST /api/v1/users/register
ç”¨æˆ·æ³¨å†Œæ¥å£

#### è¯·æ±‚å‚æ•°
```typescript
interface RegisterRequest {
  code: string              // å¾®ä¿¡æˆæƒç 
  encryptedData?: string    // åŠ å¯†çš„ç”¨æˆ·ä¿¡æ¯
  iv?: string              // åˆå§‹åŒ–å‘é‡
  signature?: string       // æ•°æ®ç­¾å
  inviteCode?: string      // é‚€è¯·ç 
}
```

#### å“åº”æ•°æ®
```typescript
interface RegisterResponse {
  success: boolean
  code: string
  message: string
  data: {
    userId: string
    token: string
    refreshToken: string
    userInfo: {
      id: string
      nickname: string
      avatar: string
      phone?: string
      pointsBalance: number
      level: number
      registeredAt: string
    }
  }
}
```

#### ç¤ºä¾‹
```bash
curl -X POST "https://api.example.com/api/v1/users/register" \
  -H "Content-Type: application/json" \
  -d '{
    "code": "wx_auth_code_123456",
    "encryptedData": "encrypted_user_data",
    "iv": "iv_string"
  }'
```

### POST /api/v1/users/login
ç”¨æˆ·ç™»å½•æ¥å£

#### è¯·æ±‚å‚æ•°
```typescript
interface LoginRequest {
  code: string              // å¾®ä¿¡æˆæƒç 
  loginType: 'wechat' | 'phone' // ç™»å½•ç±»å‹
  phone?: string           // æ‰‹æœºå·ï¼ˆæ‰‹æœºç™»å½•æ—¶å¿…å¡«ï¼‰
  verifyCode?: string      // éªŒè¯ç ï¼ˆæ‰‹æœºç™»å½•æ—¶å¿…å¡«ï¼‰
}
```

### GET /api/v1/users/:userId
è·å–ç”¨æˆ·ä¿¡æ¯

#### æƒé™è¦æ±‚
- ç”¨æˆ·åªèƒ½æŸ¥è¯¢è‡ªå·±çš„ä¿¡æ¯
- ç®¡ç†å‘˜å¯ä»¥æŸ¥è¯¢ä»»ä½•ç”¨æˆ·ä¿¡æ¯

#### å“åº”æ•°æ®
```typescript
interface UserInfoResponse {
  success: boolean
  code: string
  message: string
  data: {
    id: string
    nickname: string
    avatar: string
    phone?: string
    email?: string
    pointsBalance: number
    level: number
    totalSpent: number
    registeredAt: string
    lastLoginAt: string
    status: 'active' | 'inactive' | 'banned'
  }
}
```

### PUT /api/v1/users/:userId
æ›´æ–°ç”¨æˆ·ä¿¡æ¯

#### è¯·æ±‚å‚æ•°
```typescript
interface UpdateUserRequest {
  nickname?: string        // æ˜µç§°
  avatar?: string         // å¤´åƒURL
  phone?: string          // æ‰‹æœºå·
  email?: string          // é‚®ç®±
  preferences?: {         // ç”¨æˆ·åå¥½è®¾ç½®
    language: string
    theme: string
    notifications: boolean
  }
}
```

---

## ğŸ’° æ”¯ä»˜ç®¡ç†æ¥å£

### POST /api/v1/payments
åˆ›å»ºæ”¯ä»˜è®¢å•

#### è¯·æ±‚å‚æ•°
```typescript
interface CreatePaymentRequest {
  merchantId: string       // å•†æˆ·ID
  amount: number          // æ”¯ä»˜é‡‘é¢ï¼ˆåˆ†ï¼‰
  description?: string    // å•†å“æè¿°
  qrCodeId?: string      // æ”¶æ¬¾ç ID
  customerInfo?: {        // å®¢æˆ·ä¿¡æ¯
    name?: string
    phone?: string
  }
  metadata?: Record<string, any> // æ‰©å±•ä¿¡æ¯
}
```

#### å“åº”æ•°æ®
```typescript
interface CreatePaymentResponse {
  success: boolean
  code: string
  message: string
  data: {
    orderId: string
    orderNo: string
    amount: number
    merchantInfo: {
      id: string
      name: string
      avatar: string
    }
    pointsToAward: number   // é¢„è®¡è·å¾—ç§¯åˆ†
    paymentInfo: {
      appId: string
      timeStamp: string
      nonceStr: string
      package: string
      signType: string
      paySign: string
    }
    expiresAt: string      // è®¢å•è¿‡æœŸæ—¶é—´
  }
}
```

### GET /api/v1/payments/:orderId
æŸ¥è¯¢æ”¯ä»˜è®¢å•çŠ¶æ€

#### å“åº”æ•°æ®
```typescript
interface PaymentStatusResponse {
  success: boolean
  code: string
  message: string
  data: {
    orderId: string
    orderNo: string
    status: 'pending' | 'paid' | 'cancelled' | 'expired' | 'refunded'
    amount: number
    pointsAwarded: number
    merchantInfo: {
      id: string
      name: string
    }
    paidAt?: string
    createdAt: string
    expiredAt: string
  }
}
```

### POST /api/v1/payments/callback
å¾®ä¿¡æ”¯ä»˜å›è°ƒæ¥å£

#### å®‰å…¨è¦æ±‚
- éªŒè¯å¾®ä¿¡ç­¾å
- é˜²é‡å¤å¤„ç†
- å¼‚æ­¥å¤„ç†ç§¯åˆ†å‘æ”¾

#### è¯·æ±‚å‚æ•°
```typescript
interface PaymentCallbackRequest {
  id: string              // é€šçŸ¥ID
  create_time: string     // é€šçŸ¥åˆ›å»ºæ—¶é—´
  event_type: string      // é€šçŸ¥ç±»å‹
  resource_type: string   // é€šçŸ¥æ•°æ®ç±»å‹
  resource: {
    original_type: string
    algorithm: string
    ciphertext: string
    associated_data: string
    nonce: string
  }
}
```

### GET /api/v1/payments/history
æ”¯ä»˜å†å²æŸ¥è¯¢

#### æŸ¥è¯¢å‚æ•°
```typescript
interface PaymentHistoryQuery {
  userId?: string         // ç”¨æˆ·ID
  merchantId?: string     // å•†æˆ·ID
  status?: string         // æ”¯ä»˜çŠ¶æ€
  startDate?: string      // å¼€å§‹æ—¥æœŸ
  endDate?: string        // ç»“æŸæ—¥æœŸ
  page?: number          // é¡µç 
  pageSize?: number      // æ¯é¡µæ•°é‡
}
```

---

## ğŸ ç§¯åˆ†ç®¡ç†æ¥å£

### POST /api/v1/points/award
å‘æ”¾ç§¯åˆ†

#### æƒé™è¦æ±‚
- ä»…ç³»ç»Ÿå†…éƒ¨è°ƒç”¨
- éœ€è¦ç®¡ç†å‘˜æƒé™

#### è¯·æ±‚å‚æ•°
```typescript
interface AwardPointsRequest {
  userId: string          // ç”¨æˆ·ID
  amount: number          // ç§¯åˆ†æ•°é‡
  source: string          // ç§¯åˆ†æ¥æº
  orderId?: string        // å…³è”è®¢å•ID
  description: string     // æè¿°ä¿¡æ¯
  expiresAt?: string     // è¿‡æœŸæ—¶é—´
}
```

### GET /api/v1/points/balance/:userId
æŸ¥è¯¢ç§¯åˆ†ä½™é¢

#### å“åº”æ•°æ®
```typescript
interface PointsBalanceResponse {
  success: boolean
  code: string
  message: string
  data: {
    userId: string
    totalPoints: number     // æ€»ç§¯åˆ†
    availablePoints: number // å¯ç”¨ç§¯åˆ†
    usedPoints: number     // å·²ä½¿ç”¨ç§¯åˆ†
    expiredPoints: number  // å·²è¿‡æœŸç§¯åˆ†
    expiringPoints: number // å³å°†è¿‡æœŸç§¯åˆ†ï¼ˆ30å¤©å†…ï¼‰
    expiringAt?: string    // æœ€è¿‘è¿‡æœŸæ—¶é—´
    lastUpdated: string    // æœ€åæ›´æ–°æ—¶é—´
  }
}
```

### GET /api/v1/points/history/:userId
ç§¯åˆ†æ˜ç»†æŸ¥è¯¢

#### æŸ¥è¯¢å‚æ•°
```typescript
interface PointsHistoryQuery {
  changeType?: 'award' | 'deduct' | 'expire' | 'adjust' // å˜åŠ¨ç±»å‹
  source?: string        // ç§¯åˆ†æ¥æº
  startDate?: string     // å¼€å§‹æ—¥æœŸ
  endDate?: string       // ç»“æŸæ—¥æœŸ
  page: number          // é¡µç 
  pageSize: number      // æ¯é¡µæ•°é‡
}
```

#### å“åº”æ•°æ®
```typescript
interface PointsHistoryResponse {
  success: boolean
  code: string
  message: string
  data: {
    records: Array<{
      id: string
      pointsChange: number
      pointsBalance: number
      changeType: string
      source: string
      description: string
      orderId?: string
      merchantName?: string
      createdAt: string
      expiresAt?: string
    }>
    total: number
    page: number
    pageSize: number
    hasMore: boolean
  }
}
```

### GET /api/v1/points/statistics
ç§¯åˆ†ç»Ÿè®¡æ•°æ®

#### æŸ¥è¯¢å‚æ•°
```typescript
interface PointsStatisticsQuery {
  userId?: string        // ç”¨æˆ·IDï¼ˆç®¡ç†å‘˜å¯æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·ï¼‰
  merchantId?: string    // å•†æˆ·ID
  period: 'day' | 'week' | 'month' | 'year' // ç»Ÿè®¡å‘¨æœŸ
  startDate?: string     // å¼€å§‹æ—¥æœŸ
  endDate?: string       // ç»“æŸæ—¥æœŸ
}
```

---

## ğŸª å•†æˆ·ç®¡ç†æ¥å£

### GET /api/v1/merchants/:merchantId
è·å–å•†æˆ·ä¿¡æ¯

#### å“åº”æ•°æ®
```typescript
interface MerchantInfoResponse {
  success: boolean
  code: string
  message: string
  data: {
    id: string
    merchantName: string
    contactName: string
    contactPhone: string
    businessLicense: string
    address: string
    avatar: string
    description: string
    status: 'active' | 'inactive' | 'suspended'
    settingsConfig: {
      pointsRatio: number
      dailyLimit: number
      enabledFeatures: string[]
    }
    businessHours: {
      openTime: string
      closeTime: string
      isOpen: boolean
    }
    statistics: {
      totalTransactions: number
      totalAmount: number
      totalPointsAwarded: number
      customerCount: number
    }
    createdAt: string
    updatedAt: string
  }
}
```

### POST /api/v1/merchants/:merchantId/qrcodes
ç”Ÿæˆæ”¶æ¬¾ç 

#### è¯·æ±‚å‚æ•°
```typescript
interface CreateQRCodeRequest {
  codeType: 'fixed_amount' | 'custom_amount' // æ”¶æ¬¾ç ç±»å‹
  amount?: number         // å›ºå®šé‡‘é¢ï¼ˆåˆ†ï¼‰
  description?: string    // å•†å“æè¿°
  maxUsage?: number      // æœ€å¤§ä½¿ç”¨æ¬¡æ•°
  expiresAt?: string     // è¿‡æœŸæ—¶é—´
  style?: {              // æ ·å¼é…ç½®
    template: string
    backgroundColor: string
    logoUrl: string
  }
}
```

#### å“åº”æ•°æ®
```typescript
interface CreateQRCodeResponse {
  success: boolean
  code: string
  message: string
  data: {
    qrCodeId: string
    qrCodeUrl: string      // äºŒç»´ç å›¾ç‰‡URL
    qrCodeData: string     // äºŒç»´ç å†…å®¹
    downloadUrl: string    // ä¸‹è½½é“¾æ¥
    printUrl: string       // æ‰“å°é¡µé¢URL
    expiresAt?: string
  }
}
```

### GET /api/v1/merchants/:merchantId/transactions
å•†æˆ·äº¤æ˜“æµæ°´

#### æŸ¥è¯¢å‚æ•°
```typescript
interface MerchantTransactionsQuery {
  status?: string        // äº¤æ˜“çŠ¶æ€
  startDate?: string     // å¼€å§‹æ—¥æœŸ
  endDate?: string       // ç»“æŸæ—¥æœŸ
  customerId?: string    // å®¢æˆ·ID
  minAmount?: number     // æœ€å°é‡‘é¢
  maxAmount?: number     // æœ€å¤§é‡‘é¢
  page: number          // é¡µç 
  pageSize: number      // æ¯é¡µæ•°é‡
}
```

---

## âš™ï¸ ç³»ç»Ÿç®¡ç†æ¥å£

### GET /api/v1/system/config
è·å–ç³»ç»Ÿé…ç½®

#### æƒé™è¦æ±‚
- ç®¡ç†å‘˜æƒé™

#### å“åº”æ•°æ®
```typescript
interface SystemConfigResponse {
  success: boolean
  code: string
  message: string
  data: {
    pointsConfig: {
      defaultRatio: number
      maxDailyPoints: number
      expirationDays: number
    }
    paymentConfig: {
      orderTimeout: number
      maxAmount: number
      minAmount: number
    }
    systemConfig: {
      maintenanceMode: boolean
      enabledFeatures: string[]
      rateLimit: number
    }
  }
}
```

### PUT /api/v1/system/config
æ›´æ–°ç³»ç»Ÿé…ç½®

#### æƒé™è¦æ±‚
- è¶…çº§ç®¡ç†å‘˜æƒé™

### GET /api/v1/system/health
ç³»ç»Ÿå¥åº·æ£€æŸ¥

#### å“åº”æ•°æ®
```typescript
interface HealthCheckResponse {
  success: boolean
  code: string
  message: string
  data: {
    status: 'healthy' | 'degraded' | 'unhealthy'
    timestamp: string
    uptime: number
    version: string
    services: {
      database: 'up' | 'down'
      redis: 'up' | 'down'
      wechatPay: 'up' | 'down'
    }
    metrics: {
      responseTime: number
      errorRate: number
      throughput: number
    }
  }
}
```

---

## ğŸ“Š é€šç”¨è§„èŒƒ

### ç»Ÿä¸€å“åº”æ ¼å¼

#### æˆåŠŸå“åº”
```typescript
interface SuccessResponse<T> {
  success: true
  code: 'SUCCESS'
  message: string
  data: T
  timestamp: number
  requestId: string
}
```

#### é”™è¯¯å“åº”
```typescript
interface ErrorResponse {
  success: false
  code: string
  message: string
  details?: string
  timestamp: number
  requestId: string
  path?: string
}
```

### é”™è¯¯ç è§„èŒƒ

#### ç³»ç»Ÿé”™è¯¯ç ï¼ˆ1000-1999ï¼‰
```typescript
const SystemErrors = {
  'SYSTEM_ERROR': { code: 1000, message: 'ç³»ç»Ÿé”™è¯¯' },
  'DATABASE_ERROR': { code: 1001, message: 'æ•°æ®åº“é”™è¯¯' },
  'REDIS_ERROR': { code: 1002, message: 'ç¼“å­˜é”™è¯¯' },
  'NETWORK_ERROR': { code: 1003, message: 'ç½‘ç»œé”™è¯¯' }
}
```

#### è®¤è¯é”™è¯¯ç ï¼ˆ2000-2999ï¼‰
```typescript
const AuthErrors = {
  'UNAUTHORIZED': { code: 2000, message: 'æœªæˆæƒ' },
  'TOKEN_EXPIRED': { code: 2001, message: 'Tokenå·²è¿‡æœŸ' },
  'TOKEN_INVALID': { code: 2002, message: 'Tokenæ— æ•ˆ' },
  'PERMISSION_DENIED': { code: 2003, message: 'æƒé™ä¸è¶³' }
}
```

#### ä¸šåŠ¡é”™è¯¯ç ï¼ˆ3000-3999ï¼‰
```typescript
const BusinessErrors = {
  'USER_NOT_FOUND': { code: 3000, message: 'ç”¨æˆ·ä¸å­˜åœ¨' },
  'MERCHANT_NOT_FOUND': { code: 3001, message: 'å•†æˆ·ä¸å­˜åœ¨' },
  'ORDER_NOT_FOUND': { code: 3002, message: 'è®¢å•ä¸å­˜åœ¨' },
  'INSUFFICIENT_POINTS': { code: 3003, message: 'ç§¯åˆ†ä¸è¶³' },
  'PAYMENT_FAILED': { code: 3004, message: 'æ”¯ä»˜å¤±è´¥' }
}
```

### åˆ†é¡µè§„èŒƒ
```typescript
interface PaginationRequest {
  page: number           // é¡µç ï¼Œä»1å¼€å§‹
  pageSize: number       // æ¯é¡µæ•°é‡ï¼Œé»˜è®¤20ï¼Œæœ€å¤§100
  sort?: string         // æ’åºå­—æ®µ
  order?: 'asc' | 'desc' // æ’åºæ–¹å‘
}

interface PaginationResponse<T> {
  data: T[]
  total: number
  page: number
  pageSize: number
  totalPages: number
  hasMore: boolean
}
```

### é™æµè§„èŒƒ
```typescript
const RateLimitRules = {
  // é»˜è®¤é™åˆ¶
  default: {
    windowMs: 60 * 1000,   // 1åˆ†é’Ÿ
    max: 60,               // æœ€å¤š60æ¬¡è¯·æ±‚
    skipSuccessfulRequests: false
  },
  
  // ç™»å½•æ¥å£é™åˆ¶
  login: {
    windowMs: 15 * 60 * 1000, // 15åˆ†é’Ÿ
    max: 5,                   // æœ€å¤š5æ¬¡ç™»å½•å°è¯•
    skipSuccessfulRequests: true
  },
  
  // æ”¯ä»˜æ¥å£é™åˆ¶
  payment: {
    windowMs: 60 * 1000,   // 1åˆ†é’Ÿ
    max: 10,               // æœ€å¤š10æ¬¡æ”¯ä»˜è¯·æ±‚
    skipSuccessfulRequests: false
  }
}
```

---

## ğŸ”§ å¼€å‘è§„èŒƒ

### æ¥å£å‘½åè§„èŒƒ
```typescript
// RESTfulé£æ ¼å‘½å
const NamingRules = {
  // èµ„æºåç§°ä½¿ç”¨å¤æ•°
  users: '/api/v1/users',
  merchants: '/api/v1/merchants',
  payments: '/api/v1/payments',
  
  // HTTPæ–¹æ³•å¯¹åº”æ“ä½œ
  'GET /users': 'è·å–ç”¨æˆ·åˆ—è¡¨',
  'GET /users/:id': 'è·å–å•ä¸ªç”¨æˆ·',
  'POST /users': 'åˆ›å»ºç”¨æˆ·',
  'PUT /users/:id': 'æ›´æ–°ç”¨æˆ·',
  'DELETE /users/:id': 'åˆ é™¤ç”¨æˆ·',
  
  // å­èµ„æºå‘½å
  'GET /users/:id/points': 'è·å–ç”¨æˆ·ç§¯åˆ†',
  'POST /merchants/:id/qrcodes': 'åˆ›å»ºæ”¶æ¬¾ç '
}
```

### æ¥å£æ–‡æ¡£è§„èŒƒ
```typescript
// æ¥å£æ–‡æ¡£å¿…é¡»åŒ…å«çš„ä¿¡æ¯
interface APIDocumentation {
  summary: string          // æ¥å£ç®€ä»‹
  description: string      // è¯¦ç»†æè¿°
  method: string          // HTTPæ–¹æ³•
  path: string            // æ¥å£è·¯å¾„
  parameters: Array<{     // å‚æ•°åˆ—è¡¨
    name: string
    type: string
    required: boolean
    description: string
    example: any
  }>
  responses: Array<{      // å“åº”ç¤ºä¾‹
    status: number
    description: string
    example: any
  }>
  errors: Array<{         // é”™è¯¯ç 
    code: string
    message: string
    scenario: string
  }>
  examples: Array<{       // è¯·æ±‚ç¤ºä¾‹
    title: string
    request: any
    response: any
  }>
}
```

### æµ‹è¯•è§„èŒƒ
```typescript
// æ¥å£æµ‹è¯•è¦æ±‚
const TestingRequirements = {
  unitTests: {
    coverage: '>= 80%',
    framework: 'Jest',
    focus: ['ä¸šåŠ¡é€»è¾‘', 'è¾¹ç•Œæ¡ä»¶', 'å¼‚å¸¸å¤„ç†']
  },
  
  integrationTests: {
    coverage: '>= 70%',
    framework: 'Supertest',
    focus: ['æ¥å£æµç¨‹', 'æ•°æ®åº“äº¤äº’', 'ç¬¬ä¸‰æ–¹æœåŠ¡']
  },
  
  e2eTests: {
    coverage: 'æ ¸å¿ƒæµç¨‹',
    framework: 'Cypress',
    focus: ['ç”¨æˆ·æ³¨å†Œ', 'æ”¯ä»˜æµç¨‹', 'ç§¯åˆ†å‘æ”¾']
  }
}
```

---

## ğŸ“ æ¥å£å˜æ›´æ—¥å¿—

### v1.0.0 (2024-12-XX)
- [ ] åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- [ ] ç”¨æˆ·ç®¡ç†æ¥å£
- [ ] æ”¯ä»˜ç®¡ç†æ¥å£
- [ ] ç§¯åˆ†ç®¡ç†æ¥å£
- [ ] å•†æˆ·ç®¡ç†æ¥å£
- [ ] ç³»ç»Ÿç®¡ç†æ¥å£

### v1.1.0 (è®¡åˆ’ä¸­)
- [ ] å¢åŠ æ‰¹é‡æ“ä½œæ¥å£
- [ ] ä¼˜åŒ–åˆ†é¡µæŸ¥è¯¢æ€§èƒ½
- [ ] å¢åŠ æ•°æ®å¯¼å‡ºæ¥å£
- [ ] å®Œå–„é”™è¯¯å¤„ç†æœºåˆ¶

---

**æ–‡æ¡£çŠ¶æ€**ï¼šå¾…æŠ€æœ¯è¯„å®¡  
**ä¸‹ä¸€æ­¥è¡ŒåŠ¨**ï¼šæ¥å£è¯¦ç»†è®¾è®¡å’Œå¼€å‘  
**è´£ä»»äºº**ï¼šç³»ç»Ÿæ¶æ„å¸ˆ  
**è¯„å®¡æ—¶é—´**ï¼šå¾…å®š
