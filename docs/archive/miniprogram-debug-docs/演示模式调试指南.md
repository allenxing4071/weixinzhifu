# 🐛 演示模式调试指南

## 🔧 已修复的配置问题

### 1. 演示模式配置统一
- ✅ `app.js` 第9行：`demoMode: true` （已修复）
- ✅ `app.js` 第16行：`setupDemoMode()` 正常调用
- ✅ 启动时显示 "演示模式启动" 提示

### 2. 页面加载调试信息
- ✅ 积分页面：添加全局数据检查日志
- ✅ 个人页面：添加全局数据检查日志
- ✅ 支付页面：演示模式跳过签名验证

## 🚨 如果页面仍然空白，请按以下步骤排查

### 第一步：检查小程序控制台
1. 打开微信开发者工具
2. 点击"调试器"标签
3. 查看Console输出，应该看到：
   ```
   🚀 积分助手小程序启动（开发模式）
   ✅ 演示模式设置完成: 测试用户
   💰 积分页面加载
   🔍 全局数据检查: {...}
   🎮 演示模式：使用模拟积分数据
   🎮 加载演示积分数据...
   ✅ 演示积分数据加载完成
   ```

### 第二步：检查网络配置
1. 确认 `project.config.json` 中 `"urlCheck": false`
2. 确认开发者工具的"不校验合法域名"已勾选

### 第三步：强制刷新
1. 在开发者工具中按 `Ctrl+R` (Windows) 或 `Cmd+R` (Mac)
2. 或点击"编译"按钮重新编译
3. 清除缓存：工具 → 清除缓存 → 全部清除

### 第四步：检查页面文件
确认以下文件存在：
- `pages/points/index.js` ✅
- `pages/points/index.wxml` 
- `pages/points/index.wxss`
- `pages/profile/index.js` ✅
- `pages/profile/index.wxml`
- `pages/profile/index.wxss`

### 第五步：手动测试演示模式
在控制台中输入：
```javascript
// 检查演示模式状态
getApp().globalData.demoMode

// 手动触发演示数据加载
getApp().setupDemoMode()
```

## 📱 正确的测试流程

### 方法1：直接启动小程序
1. 重新打开微信开发者工具
2. 导入项目：`/Users/xinghailong/Documents/soft/weixinzhifu/frontend/miniprogram`
3. 看到 "演示模式启动" 提示
4. 点击底部 "积分" 标签
5. 应该看到：积分余额 1580，历史记录 4条

### 方法2：测试支付页面
1. 在地址栏输入：
   ```
   pages/payment/index?merchantId=merchant-004&subMchId=1727774152&timestamp=1759017639591&sign=23553ea1e681a076f02b8b4f9e9593ba
   ```
2. 应该看到商户名称：成都市中鑫博海国际酒业贸易有限公司

### 方法3：测试个人页面
1. 点击底部 "我的" 标签
2. 应该看到：测试用户，黄金会员，积分余额 1580

## 🎯 预期显示内容

### 积分页面应显示：
- 当前积分：1580分
- 累计获得：1630分
- 累计消费：50分
- 积分记录：4条（包含商户支付记录）
- 支付记录：2条
- 商户统计：3个商户

### 个人页面应显示：
- 用户昵称：测试用户
- 手机号：138****8888
- 会员等级：黄金会员（3级）
- 积分余额：1580分
- 菜单项：积分记录、支付记录、帮助中心、关于我们

## 🔍 如果仍有问题

### 检查具体错误信息
1. 控制台是否有红色错误信息？
2. 网络请求是否失败？
3. 页面渲染是否报错？

### 联系支持
提供以下信息：
1. 控制台完整日志截图
2. 错误信息截图
3. 小程序版本信息
4. 微信开发者工具版本

**现在重新启动小程序测试，应该能看到完整的演示数据！** 🚀