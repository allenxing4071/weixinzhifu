<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Êï∞ÊçÆÂ∫ìÁÆ°ÁêÜ - ÂæÆ‰ø°ÊîØ‰ªòÁßØÂàÜÁ≥ªÁªü</title>
    <link rel="stylesheet" href="database-viewer.css">
</head>
<body>
    <div class="db-container">
        <!-- Â§¥ÈÉ® -->
        <header class="db-header">
            <div class="header-content">
                <div class="header-left">
                    <h1>üóÑÔ∏è Êï∞ÊçÆÂ∫ìÁÆ°ÁêÜ</h1>
                    <div class="db-info">
                        <span class="db-name" id="dbName">weixin_payment</span>
                        <span class="db-badge mysql">MySQL 8.0</span>
                    </div>
                </div>
                <div class="header-right">
                    <button class="refresh-btn" onclick="refreshAll()">
                        <span class="icon">üîÑ</span>
                        Âà∑Êñ∞
                    </button>
                    <button class="back-btn" onclick="window.location.href='../dashboard/dashboard.html'">
                        <span class="icon">‚Üê</span>
                        ËøîÂõûÊéßÂà∂Âè∞
                    </button>
                </div>
            </div>
            
            <!-- ÁªüËÆ°‰ø°ÊÅØ -->
            <div class="stats-row">
                <div class="stat-item">
                    <span class="stat-label">Êï∞ÊçÆË°®</span>
                    <span class="stat-value" id="tableCount">-</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">ÊÄªËÆ∞ÂΩïÊï∞</span>
                    <span class="stat-value" id="totalRows">-</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Êï∞ÊçÆÂ∫ìÂ§ßÂ∞è</span>
                    <span class="stat-value" id="dbSize">-</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">ÊúÄÂêéÊõ¥Êñ∞</span>
                    <span class="stat-value" id="lastUpdate">-</span>
                </div>
            </div>
        </header>

        <!-- ‰∏ªÂÜÖÂÆπÂå∫ -->
        <div class="db-content">
            <!-- Â∑¶‰æßÔºöË°®ÂàóË°® -->
            <aside class="tables-sidebar">
                <div class="sidebar-header">
                    <h3>Êï∞ÊçÆË°®ÂàóË°®</h3>
                    <input type="text" id="tableSearch" placeholder="ÊêúÁ¥¢Ë°®Âêç..." class="search-input">
                </div>
                <div class="tables-list" id="tablesList">
                    <!-- Âä®ÊÄÅÂä†ËΩΩ -->
                    <div class="loading">Âä†ËΩΩ‰∏≠...</div>
                </div>
            </aside>

            <!-- Âè≥‰æßÔºöË°®ËØ¶ÊÉÖ -->
            <main class="table-details">
                <!-- Ê¨¢ËøéÈ°µ -->
                <div class="welcome-screen" id="welcomeScreen">
                    <div class="welcome-icon">üóÑÔ∏è</div>
                    <h2>ÈÄâÊã©‰∏Ä‰∏™Êï∞ÊçÆË°®</h2>
                    <p>‰ªéÂ∑¶‰æßÂàóË°®‰∏≠ÈÄâÊã©Ë¶ÅÊü•ÁúãÁöÑË°®</p>
                </div>

                <!-- Ë°®ËØ¶ÊÉÖ -->
                <div class="table-view" id="tableView" style="display: none;">
                    <!-- TabÂØºËà™ -->
                    <div class="tabs">
                        <button class="tab-btn active" data-tab="structure">
                            üìã Ë°®ÁªìÊûÑ
                        </button>
                        <button class="tab-btn" data-tab="data">
                            üìä Êï∞ÊçÆÊµèËßà
                        </button>
                        <button class="tab-btn" data-tab="info">
                            ‚ÑπÔ∏è Ë°®‰ø°ÊÅØ
                        </button>
                    </div>

                    <!-- TabÂÜÖÂÆπ -->
                    <div class="tab-content active" id="structureTab">
                        <div class="table-header">
                            <h3 id="currentTableName">-</h3>
                            <div class="table-meta">
                                <span id="tableRowCount">0 rows</span>
                                <span id="tableSize">0 KB</span>
                            </div>
                        </div>

                        <div class="columns-table-container">
                            <table class="columns-table" id="columnsTable">
                                <thead>
                                    <tr>
                                        <th>Â≠óÊÆµÂêç</th>
                                        <th>Á±ªÂûã</th>
                                        <th>ÂèØÁ©∫</th>
                                        <th>ÈîÆ</th>
                                        <th>ÈªòËÆ§ÂÄº</th>
                                        <th>È¢ùÂ§ñ</th>
                                        <th>Ê≥®Èáä</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Âä®ÊÄÅÂä†ËΩΩ -->
                                </tbody>
                            </table>
                        </div>

                        <div class="indexes-section">
                            <h4>Á¥¢Âºï</h4>
                            <table class="indexes-table" id="indexesTable">
                                <thead>
                                    <tr>
                                        <th>Á¥¢ÂºïÂêç</th>
                                        <th>ÂàóÂêç</th>
                                        <th>ÂîØ‰∏Ä</th>
                                        <th>Á±ªÂûã</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Âä®ÊÄÅÂä†ËΩΩ -->
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div class="tab-content" id="dataTab">
                        <div class="data-toolbar">
                            <div class="toolbar-left">
                                <select id="pageSizeSelect" onchange="changePageSize()">
                                    <option value="10">10 / È°µ</option>
                                    <option value="20" selected>20 / È°µ</option>
                                    <option value="50">50 / È°µ</option>
                                    <option value="100">100 / È°µ</option>
                                </select>
                                <select id="sortColumnSelect" onchange="changeSorting()">
                                    <option value="">ÊéíÂ∫èÂ≠óÊÆµ</option>
                                </select>
                                <select id="sortOrderSelect" onchange="changeSorting()">
                                    <option value="DESC">ÈôçÂ∫è</option>
                                    <option value="ASC">ÂçáÂ∫è</option>
                                </select>
                            </div>
                            <div class="toolbar-right">
                                <button class="export-btn" onclick="exportData()">
                                    <span class="icon">üì•</span>
                                    ÂØºÂá∫
                                </button>
                            </div>
                        </div>

                        <div class="data-table-container">
                            <table class="data-table" id="dataTable">
                                <thead id="dataTableHead">
                                    <!-- Âä®ÊÄÅÂä†ËΩΩ -->
                                </thead>
                                <tbody id="dataTableBody">
                                    <!-- Âä®ÊÄÅÂä†ËΩΩ -->
                                </tbody>
                            </table>
                        </div>

                        <div class="pagination" id="pagination">
                            <!-- Âä®ÊÄÅÂä†ËΩΩ -->
                        </div>
                    </div>

                    <div class="tab-content" id="infoTab">
                        <div class="info-grid" id="tableInfo">
                            <!-- Âä®ÊÄÅÂä†ËΩΩ -->
                        </div>
                    </div>
                </div>
            </main>
        </div>

        <!-- SQLÊü•ËØ¢ÊéßÂà∂Âè∞ -->
        <div class="sql-console" id="sqlConsole">
            <div class="console-header">
                <h3>SQLÊü•ËØ¢ÊéßÂà∂Âè∞</h3>
                <button class="toggle-console" onclick="toggleConsole()">
                    <span id="consoleToggleIcon">‚ñº</span>
                </button>
            </div>
            <div class="console-content" id="consoleContent">
                <div class="sql-editor">
                    <textarea id="sqlEditor" placeholder="ËæìÂÖ•SQLÊü•ËØ¢ (‰ªÖÊîØÊåÅSELECT„ÄÅSHOW„ÄÅDESCRIBE)&#10;‰æãÂ¶Ç: SELECT * FROM users LIMIT 10"></textarea>
                    <div class="editor-actions">
                        <button class="execute-btn" onclick="executeSQL()">
                            <span class="icon">‚ñ∂</span>
                            ÊâßË°å
                        </button>
                        <button class="clear-btn" onclick="clearSQL()">Ê∏ÖÁ©∫</button>
                    </div>
                </div>
                <div class="sql-result" id="sqlResult">
                    <div class="result-placeholder">Êü•ËØ¢ÁªìÊûúÂ∞ÜÊòæÁ§∫Âú®ËøôÈáå</div>
                </div>
            </div>
        </div>
    </div>

    <script src="database-viewer.js"></script>
</body>
</html>

